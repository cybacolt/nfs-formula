{% set map = {
    'Ubuntu': {
        'pkgs_server': ['nfs-common', 'nfs-kernel-server'],
        'pkgs_client': ['nfs-common'],
        'service_name': 'nfs-kernel-server',
	'export_template': 'salt://nfs/files/exports'
    },
    'Debian': {
        'pkgs_server': ['nfs-common', 'nfs-kernel-server'],
        'pkgs_client': ['nfs-common'],
        'service_name': 'nfs-kernel-server',
	'export_template': 'salt://nfs/files/exports'
    }
} %}

# is support for <0.17 still required?
{% if grains.get('saltversioninfo:0', '') == 0 and grains.get('saltversioninfo:1', '') < 17  %}
{% set nfs = map.get(grains.os) %}
{% else %}
{% set nfs = salt['grains.filter_by'](map, merge=salt['pillar.get']('nfs:lookup')) %}
{% endif %}
